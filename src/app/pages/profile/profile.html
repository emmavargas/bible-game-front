<div class="flex flex-col bg-white rounded-2xl shadow-lg p-8 space-y-6">
    <app-profile-header></app-profile-header>

    <!-- Informacion mail no editable-->
    <div class="flex flex-col bg-gradient-to-r from-gray-50 to-slate-50 p-4 rounded-xl">
        <div class="flex items-center gap-3 mb-4">
            <span class="w-6 h-6 bg-gray-500 rounded-full flex items-center justify-center text-white text-sm">🔒</span>
            <span class="font-semibold text-gray-700">Información de Cuenta</span>
        </div>
        <div class="flex justify-between">
            <div class="flex items-center gap-4">
                <span class="text-blue-500 text-xl">📧</span>
                <h4 class="text-gray-500 text-sm">Correo Electrónico</h4>
            </div>
            <h4 class="text-gray-700 ml-2">{{profileState.email()}}</h4>
        </div>
    </div>

    <!-- Informacion nombre, apellido y usuario-->
    <div class="flex flex-col bg-indigo-50 p-4 rounded-xl">
        <div class="flex items-center gap-3 mb-4">
            <span class="w-6 h-6 bg-indigo-500 rounded-full flex items-center justify-center text-white text-sm">👤</span>
            <span class="font-semibold text-gray-700">Información Personal</span>
        </div>
        <form [formGroup]="profileForm" class="flex flex-col space-y-4" (ngSubmit)="onSubmit()">
            <div class="grid grid-cols-3 gap-4">
                <div class="space-y-2">
                    <label for="name" class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="text-blue-500">✨</span>
                        Nombre
                    </label>
                    <input id="name" type="text" placeholder="Nombre" formControlName="name" 
                           class="w-full p-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-900 placeholder-gray-400">
                </div>

                <div class="space-y-2">
                    <label for="lastname" class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="text-blue-500">✨</span>
                        Apellido
                    </label>
                    <input id="lastname" type="text" placeholder="Apellido" formControlName="lastname"
                           class="w-full p-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-900 placeholder-gray-400">
                </div>

                <div class="space-y-2">
                    <label for="username" class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="text-blue-500">✨</span>
                        Usuario
                    </label>
                    <input id="username" type="text" placeholder="username" formControlName="username"
                           class="w-full p-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-indigo-500 focus:border-transparent text-gray-900 placeholder-gray-400">
                    @if (backendError()) {
                        <small class="text-red-600 text-sm font-bold text-center mt-2 ">{{backendError()}}</small>
                    }
                </div>
            </div>
            <div class="flex justify-end pt-2">
                <button type="submit" class="bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center w-56 whitespace-nowrap justify-between">
                    <span>💾</span>
                    <span>Guardar Cambios</span>
                </button>
            </div>
        </form>
    </div>

    <!-- Cambiar Contraseña -->
    <div class="flex flex-col bg-red-50 p-4 rounded-xl">
        <div class="flex items-center gap-3 mb-4">
            <span class="w-6 h-6 bg-red-500 rounded-full flex items-center justify-center text-white text-sm">🔐</span>
            <span class="font-semibold text-gray-700">Seguridad</span>
        </div>
        <form [formGroup]="passwordForm" class="flex flex-col space-y-4" (ngSubmit)="onSubmitPassword()">
            <div class="grid grid-cols-3 gap-4">
                <div class="space-y-2">
                    <label for="password" class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="text-blue-500">🔒</span>
                        Contraseña Actual
                    </label>
                    <input id="password" type="password" placeholder="Contraseña Actual" formControlName="password"
                           class="w-full p-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 placeholder-gray-400">

                    @if (infoMessagePassword() != 'Contraseña actualizada con éxito') {
                        <small class="text-red-600 text-sm font-bold text-center mt-2 ">{{infoMessagePassword()}}</small>
                    }
                    @else {
                        <small class="text-green-600 text-sm font-bold text-center mt-2 ">{{infoMessagePassword()}}</small>
                    }
                </div>

                <div class="space-y-2">
                    <label for="newPassword" class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="text-blue-500">🔒</span>
                        Nueva Contraseña
                    </label>
                    <input id="newPassword" type="password" placeholder="Nueva Contraseña" formControlName="newPassword"
                           class="w-full p-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 placeholder-gray-400">
                </div>

                <div class="space-y-2">
                    <label for="confirmPassword" class="flex items-center gap-2 text-sm text-gray-600">
                        <span class="text-blue-500">🔒</span>
                        Confirmar Contraseña
                    </label>
                    <input id="confirmPassword" type="password" placeholder="Confirmar Contraseña" formControlName="confirmPassword"
                           class="w-full p-2 rounded-lg border border-gray-200 focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 placeholder-gray-400">
                </div>
            </div>
            
            <div class="flex flex-col space-y-2">
                <p class="text-xs text-gray-500">💡 Consejo: Usa una contraseña fuerte con al menos 6 caracteres</p>
                <div class="flex justify-end">
                    <button type="submit" class="bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700 transition-colors flex items-center w-56 whitespace-nowrap justify-between">
                        <span>🔐</span>
                        <span>Actualizar Contraseña</span>
                    </button>
                </div>
            </div>
        </form>
    </div>
    <!-- Puntajes -->
    <div class="flex flex-col bg-yellow-50 p-4 rounded-xl">
        <app-profile-score></app-profile-score>
    </div>

    <button routerLink="/" class="mt-6 bg-gray-100 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors flex items-center gap-2 justify-center">
        <span>🏠</span>
        Volver al Menú
    </button>
</div>


